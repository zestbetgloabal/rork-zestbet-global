textversion: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm install
    build:
      commands:
        - npx expo export --platform web --output-dir dist --clear --no-bundler
        - sed -i 's|</head>|<script type="module" src="_expo/static/js/web/entry-00eeb7ada0bec032ab0846d793a7adf8.js"></script></head>|' dist/index.html
    postBuild:
      commands:
        - cp dist/index.html dist/200.html || copy dist/index.html dist/200.html
        - cp dist/index.html dist/404.html || copy dist/index.html dist/404.html
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*